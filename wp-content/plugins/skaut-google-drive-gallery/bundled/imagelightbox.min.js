"use strict";!function(N,V,U){"use strict";var K=N("<div/>").attr("class","imagelightbox-loading").append(N("<div/>")),e=N("<div/>",{class:"imagelightbox-arrow imagelightbox-arrow-left"}),i=N("<div/>",{class:"imagelightbox-arrow imagelightbox-arrow-right"}),Y=e.add(i),_=N("<div/>",{class:"imagelightbox-caption",html:"&nbsp;"}),H=N("<div/>",{class:"imagelightbox-close"}),$=N("<div/>",{class:"imagelightbox-overlay"}),W=N("<a/>",{href:"#",class:"imagelightbox-navitem"}),B=N("<div/>",{class:"imagelightbox-nav"}),Q=N("<div/>",{class:"imagelightbox-wrapper"}),A=N("body"),r=function(){var e=(U.body||U.documentElement).style;if(e.transition==="")return"";if(e.webkitTransition==="")return"-webkit-";if(e.MozTransition==="")return"-moz-";if(e.OTransition==="")return"-o-";return false},G=r()!==false,J=function(e,i,t){var n={},a=r()||"";n[a+"transform"]="translateX("+i+") translateY(-50%)";n[a+"transition"]=a+"transform "+t.toString()+"s ease-in";e.css(n)},Z="ontouchstart"in V,t=V.navigator,ee=t.pointerEnabled||t.msPointerEnabled,ie=function(e){if(Z)return true;if(!ee||typeof e==="undefined"||typeof e.pointerType==="undefined")return false;if(typeof e.MSPOINTER_TYPE_MOUSE!=="undefined"){if(e.MSPOINTER_TYPE_MOUSE!==e.pointerType)return true}else if(e.pointerType!=="mouse")return true;return false},te=!!(U.fullscreenEnabled||U.webkitFullscreenEnabled||U.mozFullScreenEnabled||U.msFullscreenEnabled),ne=!!(V.history&&history.pushState);N.fn.imageLightbox=function(e){var t=0;var u=N();var c=false;var d=0;var g=N();var o=-1;var h=N([]);var n="";var p=[],v=N.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:false,arrows:false,button:false,caption:false,enableKeyboard:true,history:false,fullscreen:false,gutter:10,offsetY:0,navigation:false,overlay:false,preloadNext:true,quitOnEnd:false,quitOnImgClick:false,quitOnDocClick:true,quitOnEscKey:true},e),a=function(){if(v.arrows)z();if(v.navigation)L();if(v.overlay)k();if(v.button)q();if(v.caption)Q.append(_)},i=function(){if(v.activity)E();if(v.caption)C()},b=function(){if(v.activity)I();if(v.arrows)Y.css("display","block")},r=function(e,i,t){var n=i+"="+t;var a="?"+n;if(e){var r=new RegExp("([?&])"+i+"=[^&]*");if(r.exec(e)!==null)a=e.replace(r,"$1"+n);else a=e+"&"+n}return a},l=function(){if(!ne||!v.history)return;var e=h[o].dataset.ilb2Id;if(!e)e=o.toString();var i={imageLightboxIndex:e,imageLightboxSet:""};var t=h[o].dataset.imagelightbox;if(t)i.imageLightboxSet=t;var n=r(U.location.search,"imageLightboxIndex",e);if(t)n=r(n,"imageLightboxSet",t);V.history.pushState(i,"",U.location.pathname+n)},f=function(e,i){var t=e;if(t){var n=new RegExp("\\?"+i+"=[^&]*");var a=new RegExp("&"+i+"=[^&]*");t=t.replace(n,"?");t=t.replace(a,"")}return t},s=function(){if(!ne||!v.history)return;var e=f(U.location.search,"imageLightboxIndex");e=f(e,"imageLightboxSet");V.history.pushState({},"",U.location.pathname+e)},m=function(e){var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(U.location.search);if(!i||!i[2])return undefined;return decodeURIComponent(i[2].replace(/\+/g," "))},x=function(){if(!ne||!v.history)return;var e=m("imageLightboxIndex");if(!e)return;var i=h.filter('[data-ilb2-id="'+e+'"]');if(i.length>0)o=h.index(i);else{o=parseInt(e);i=N(h[o])}var t=m("imageLightboxSet");if(!i[0]||!!t&&t!==i[0].dataset.imagelightbox)return;F(i,true)},y=function(e){var i=e.originalEvent.state;if(!i){M(true);return}var t=i.imageLightboxIndex;if(t===undefined){M(true);return}var n=h.filter('[data-ilb2-id="'+t+'"]');if(n.length===0)return;var a=h.index(n);if(!n[0]||i.imageLightboxSet&&i.imageLightboxSet!==n[0].dataset.imagelightbox)return;if(o<0){F(n,true);return}var r=+1;if(a>o)r=-1;g=n;o=a;O(r)},S=function(){if(c)return;o--;if(o<0)if(v.quitOnEnd===true){M();return}else o=h.length-1;g=h.eq(o);l();Q.trigger("previous.ilb2",g);O(+1)},w=function(){if(c)return;o++;if(o>=h.length)if(v.quitOnEnd===true){M();return}else o=0;l();g=h.eq(o);Q.trigger("next.ilb2",g);O(-1)},E=function(){Q.append(K)},I=function(){N(".imagelightbox-loading").remove()},k=function(){Q.append($)},q=function(){H.appendTo(Q).on("click.ilb7",function(){M();return false})},C=function(){_.css("opacity","0");_.html("&nbsp;");if(N(g).data("ilb2-caption")){_.css("opacity","1");_.html(N(g).data("ilb2-caption"))}else if(N(g).find("img").attr("alt")){_.css("opacity","1");_.html(N(g).find("img").attr("alt"))}},L=function(){if(!h.length)return;for(var e=0;e<h.length;e++)B.append(W.clone());var i=B.children("a");i.eq(h.index(g)).addClass("active");Q.on("previous.ilb2 next.ilb2",function(){i.removeClass("active").eq(h.index(g)).addClass("active")});Q.append(B);B.on("click.ilb7 touchend.ilb7",function(){return false}).on("click.ilb7 touchend.ilb7","a",function(){var e=N(this);if(h.eq(e.index()).attr("href")!==N(".imagelightbox").attr("src")){var i=h.eq(e.index());if(i.length){t=h.index(g);g=i;O(e.index()<t?-1:1)}}e.addClass("active").siblings().removeClass("active")})},z=function(){Q.append(Y);Y.on("click.ilb7 touchend.ilb7",function(e){e.stopImmediatePropagation();e.preventDefault();if(N(this).hasClass("imagelightbox-arrow-left"))S();else w()})},X=function(e){return N(e).prop("tagName").toLowerCase()==="a"&&(new RegExp(".("+v.allowedTypes+")$","i").test(N(e).attr("href"))||N(e).data("ilb2Video"))},T=function(){if(!u.length)return;var e=v.caption?_.outerHeight():0,o=N(V).width(),l=N(V).height()-e,f=Math.abs(1-v.gutter/100);function t(e,i){if(e>o||i>l){var t=e/i>o/l?e/o:i/l;e/=t;i/=t}var n=i*f,a=e*f,r=(N(V).width()-a)/2;u.css({width:a.toString()+"px",height:n.toString()+"px",left:r.toString()+"px"})}var n=u.data("ilb2VideoId");var a=false;N.each(p,function(e,i){if(n===this.i){t(i.w,i.h);a=true}});if(a)return;var i=u.get(0);if(i.videoWidth!==undefined){t(i.videoWidth,i.videoHeight);return}var r=new Image;r.src=u.attr("src");r.onload=function(){t(r.width,r.height)}},O=function(s){if(c)return;if(u.length){var e={opacity:0};if(G)J(u,(100*s-d).toString()+"px",v.animationSpeed/1e3);else e.left=(parseInt(u.css("left"))+100*s).toString()+"px";u.animate(e,v.animationSpeed,function(){P()});d=0}c=true;i();setTimeout(function(){var i=0;var t=0;var n=0;var e=g.attr("href");var a=g.data("ilb2Video");var r=N();var o;if(a)N.each(p,function(e,i){if(i.i===g.data("ilb2VideoId")){o=i.l;r=i.e;if(i.a){if(o===false)r.attr("autoplay",i.a);if(o===true)void r.get(0).play()}}});else r=N("<img id='"+v.id+"' />").attr("src",e);function l(){var e={opacity:1};u.appendTo(Q);T();u.css("opacity",0);if(G){J(u,(-100*s).toString()+"px",0);setTimeout(function(){J(u,"0px",v.animationSpeed/1e3)},50)}else{n=parseInt(u.css("left"));e.left=n.toString()+"px";u.css("left",(n-100*s).toString()+"px")}u.animate(e,v.animationSpeed,function(){c=false;b()});if(v.preloadNext){var i=h.eq(h.index(g)+1);if(!i.length)i=h.eq(0);N("<img />").attr("src",i.attr("href"))}Q.trigger("loaded.ilb2")}function f(e){e.preventDefault();if(v.quitOnImgClick){M();return}if(ie(e.originalEvent))return;var i=(e.pageX||e.originalEvent.pageX)-e.target.offsetLeft;if(e.target.width/3>i)S();else w()}u=r.on("load.ilb7",l).on("error.ilb7",function(){b()}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(e){if(!ie(e.originalEvent)||v.quitOnImgClick)return;if(G)n=parseInt(u.css("left"));i=e.originalEvent.pageX||e.originalEvent.touches[0].pageX}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(e){if(!ee&&e.type==="pointermove"||!ie(e.originalEvent)||v.quitOnImgClick)return;e.preventDefault();t=e.originalEvent.pageX||e.originalEvent.touches[0].pageX;d=i-t;if(G)J(u,(-d).toString()+"px",0);else u.css("left",(n-d).toString()+"px")}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(e){if(!ie(e.originalEvent)||v.quitOnImgClick)return;if(Math.abs(d)>50)if(d<0)S();else w();else if(G)J(u,"0px",v.animationSpeed/1e3);else u.animate({left:n.toString()+"px"},v.animationSpeed/2)});if(o===true)l();if(o===false)u=u.on("loadedmetadata.ilb7",l);if(!a)u=u.on(ee?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",f)},v.animationSpeed+100)},P=function(){if(!u.length)return;u.remove();u=N()},F=function(e,i){if(c)return;c=false;g=e;o=h.index(g);if(!i)l();a();A.append(Q).addClass("imagelightbox-open");Q.trigger("start.ilb2",e);O(0)},M=function(e){if(e===void 0)e=false;o=-1;if(!e)s();Q.trigger("quit.ilb2");A.removeClass("imagelightbox-open");if(!u.length)return;u.animate({opacity:0},v.animationSpeed,function(){P();c=false;Q.remove().find("*").remove()})},D=function(e){e.each(function(){h=e.add(N(this))});e.on("click.ilb7",{set:n},function(e){e.preventDefault();n=N(e.currentTarget).data("imagelightbox");i();if(h.length<1)M();else F(N(this),false)});function i(){e.filter(function(){return N(this).data("imagelightbox")===n}).filter(function(){return X(N(this))}).each(function(){h=h.add(N(this))})}},R=function(e){e.each(function(){var e=N(this).data("ilb2Video");if(e){var i=N(this).data("ilb2Id");if(!i)i="a"+((1+Math.random())*65536|0).toString(16);N(this).data("ilb2VideoId",i);var n={e:N("<video id='"+v.id+"' preload='metadata' data-ilb2-video-id='"+i+"'>"),i:i,l:false,a:undefined,h:undefined,w:undefined};N.each(e,function(e,i){switch(e){case"autoplay":n.a=i;break;case"height":n.h=i;break;case"sources":break;case"width":n.w=i;break;default:n.e=n.e.attr(e,i)}});if(e.sources)N.each(e.sources,function(e,i){var t=N("<source>");N.each(i,function(e,i){t=t.attr(e,i)});n.e.append(t)});n.e.on("loadedmetadata.ilb7",function(){n.l=true});p.push(n)}})};N(V).on("resize.ilb7",T);if(ne&&v.history)N(V).on("popstate",y);N(U).ready(function(){if(v.quitOnDocClick)N(U).on(Z?"touchend.ilb7":"click.ilb7",function(e){if(u.length&&!N(e.target).is(u)){e.preventDefault();M()}});if(v.fullscreen&&te)N(U).on("keydown.ilb7",function(e){if(!u.length)return;if([9,32,38,40].includes(e.which)){e.stopPropagation();e.preventDefault()}if([13].includes(e.which)){e.stopPropagation();e.preventDefault();j()}});if(v.enableKeyboard)N(U).on("keydown.ilb7",function(e){if(!u.length)return;if([27].includes(e.which)&&v.quitOnEscKey){e.stopPropagation();e.preventDefault();M()}if([37].includes(e.which)){e.stopPropagation();e.preventDefault();S()}if([39].includes(e.which)){e.stopPropagation();e.preventDefault();w()}})});function j(){var e=V.document;var i=U.getElementById(v.id).parentElement;var t=i.requestFullscreen||i.mozRequestFullScreen||i.webkitRequestFullScreen||i.msRequestFullscreen;var n=e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen;if(!e.fullscreenElement&&!e.mozFullScreenElement&&!e.webkitFullscreenElement&&!e.msFullscreenElement)void t.call(i);else void n.call(e)}N(U).off(".ilb7 .ilb2",v.selector);D(N(this));x();R(h);this.addToImageLightbox=function(e){D(e);R(e)};this.openHistory=function(){x()};this.loadPreviousImage=function(){S()};this.loadNextImage=function(){w()};this.quitImageLightbox=function(){M();return this};this.startImageLightbox=function(e){if(e)e.trigger("click.ilb7");else N(this).trigger("click.ilb7")};return this}}("object"==typeof module&&"object"==typeof module.exports?require("jquery"):jQuery,window,document);